<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mr. Matt Math Club</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .card-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      margin-top: 0.75rem;
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 1.05rem;
      font-weight: 600;
    }
    .card-badge.high-score {
      background: #ede9fe;
      color: #7c3aed;
    }
    .card-badge.trophy-gold {
      background: #fef3c7;
      color: #92400e;
    }
    .card-badge.trophy-silver {
      background: #f1f5f9;
      color: #475569;
    }
  </style>
</head>
<body>
  <header>
    <h1>Mr. Matt Math Club</h1>
  </header>

  <main>
    <div class="card-grid">
      <a href="activities/number-bonds.html" class="card number-bonds">
        <span class="icon">&#x1F517;</span>
        <h2>Number Bonds</h2>
        <p>Discover the pairs that make up a number.</p>
      </a>

      <a href="activities/dice-bingo.html" class="card dice-bingo">
        <span class="icon">&#x1F3B2;</span>
        <h2>Dice Bingo</h2>
        <p>Fill a bingo card and see how many rolls to win!</p>
      </a>

      <a href="activities/sharing-numbers.html" class="card sharing-numbers">
        <span class="icon">&#xF7;</span>
        <h2>Sharing Numbers</h2>
        <p>Some numbers are more easily sharable...</p>
      </a>

      <a href="activities/cake-cutting.html" class="card cake-cutting">
        <span class="icon">&#x1F370;</span>
        <h2>Cake Cutting</h2>
        <p>Are there enough pieces of cake for all the guests? Be quick!</p>
      </a>

      <a href="activities/four-coloring.html" class="card four-coloring">
        <span class="icon">&#x1F3A8;</span>
        <h2>Four Coloring</h2>
        <p>Color pictures so that no neighbors match!</p>
      </a>

      <a href="activities/four-color-usa.html" class="card four-color-usa">
        <span class="icon">&#x1F5FA;</span>
        <h2>Four Coloring USA</h2>
        <p>Color all 50 states so no neighbors match!</p>
      </a>

      <a href="activities/four-color-europe.html" class="card four-color-europe">
        <span class="icon">&#x1F5FA;</span>
        <h2>Four Coloring Europe</h2>
        <p>Color all 41 countries so no neighbors match!</p>
      </a>

      <a href="activities/four-color-asia.html" class="card four-color-asia">
        <span class="icon">&#x1F5FA;</span>
        <h2>Four Coloring Asia</h2>
        <p>Color all 45 countries so no neighbors match!</p>
      </a>

      <a href="activities/four-color-africa.html" class="card four-color-africa">
        <span class="icon">&#x1F5FA;</span>
        <h2>Four Coloring Africa</h2>
        <p>Color all 49 countries so no neighbors match!</p>
      </a>

      <a href="activities/four-color-north-america.html" class="card four-color-north-america">
        <span class="icon">&#x1F5FA;</span>
        <h2>Four Coloring North America</h2>
        <p>Color all 15 countries so no neighbors match!</p>
      </a>

      <a href="activities/four-color-south-america.html" class="card four-color-south-america">
        <span class="icon">&#x1F5FA;</span>
        <h2>Four Coloring South America</h2>
        <p>Color all 12 countries so no neighbors match!</p>
      </a>

    </div>
  </main>

<script>
  var trophySvg = function(fill) {
    return '<svg width="20" height="20" viewBox="0 0 24 24" fill="' + fill + '" xmlns="http://www.w3.org/2000/svg">' +
      '<path d="M5 3h14v2h3v4c0 1.7-1.3 3-3 3h-.7A7 7 0 0 1 13 16.9V19h3v2H8v-2h3v-2.1A7 7 0 0 1 5.7 12H5c-1.7 0-3-1.3-3-3V5h3V3zm0 4H4v2c0 .6.4 1 1 1h.3A7 7 0 0 1 5 7zm14 0a7 7 0 0 1-.3 3H19c.6 0 1-.4 1-1V7h-1z"/>' +
      '</svg>';
  };

  // High-score badges
  var scoreActivities = [
    { selector: '.sharing-numbers', key: 'sharingNumbers_highScore' },
    { selector: '.cake-cutting',    key: 'cakeCutting_highScore' },
    { selector: '.number-bonds',    key: 'numberBonds_highScore' }
  ];
  scoreActivities.forEach(function(act) {
    var score = parseInt(localStorage.getItem(act.key));
    if (score > 0) {
      var card = document.querySelector(act.selector);
      var badge = document.createElement('span');
      badge.className = 'card-badge high-score';
      badge.textContent = 'Best: ' + score;
      card.appendChild(badge);
    }
  });

  // Four Coloring trophy
  function renderFourColoringBadge(state) {
    var card = document.querySelector('.four-coloring');
    var existing = card.querySelector('.card-badge');
    if (existing) existing.remove();
    if (state === 'silver') {
      var badge = document.createElement('span');
      badge.className = 'card-badge trophy-silver';
      badge.innerHTML = trophySvg('#94a3b8') + 'Complete';
      card.appendChild(badge);
    } else if (state === 'gold') {
      var badge = document.createElement('span');
      badge.className = 'card-badge trophy-gold';
      badge.innerHTML = trophySvg('#f59e0b') + 'Perfect!';
      card.appendChild(badge);
    }
  }

  // Load from localStorage
  try {
    var fc = JSON.parse(localStorage.getItem('fourColoring_completion'));
    if (Array.isArray(fc) && fc.length === 15 && fc.every(function(v) { return v > 0; })) {
      renderFourColoringBadge(fc.every(function(v) { return v === 2; }) ? 'gold' : 'silver');
    }
  } catch(e) {}

  // Four Color map progress / completion badges
  var mapActivities = [
    { selector: '.four-color-usa', completedKey: 'fourColorUSA_completed', colorsKey: 'fourColorUSA_stateColors', total: 50, unit: 'states' },
    { selector: '.four-color-europe', completedKey: 'fourColorEurope_completed', colorsKey: 'fourColorEurope_stateColors', total: 39, unit: 'countries' },
    { selector: '.four-color-asia', completedKey: 'fourColorAsia_completed', colorsKey: 'fourColorAsia_stateColors', total: 44, unit: 'countries' },
    { selector: '.four-color-africa', completedKey: 'fourColorAfrica_completed', colorsKey: 'fourColorAfrica_stateColors', total: 49, unit: 'countries' },
    { selector: '.four-color-north-america', completedKey: 'fourColorNorthAmerica_completed', colorsKey: 'fourColorNorthAmerica_stateColors', total: 15, unit: 'countries' },
    { selector: '.four-color-south-america', completedKey: 'fourColorSouthAmerica_completed', colorsKey: 'fourColorSouthAmerica_stateColors', total: 12, unit: 'countries' }
  ];
  mapActivities.forEach(function(act) {
    var card = document.querySelector(act.selector);
    if (!card) return;

    if (localStorage.getItem(act.completedKey) === 'true') {
      var badge = document.createElement('span');
      badge.className = 'card-badge trophy-gold';
      badge.innerHTML = trophySvg('#f59e0b') + 'Complete!';
      card.appendChild(badge);
    } else {
      try {
        var saved = JSON.parse(localStorage.getItem(act.colorsKey));
        if (saved && typeof saved === 'object') {
          var count = Object.keys(saved).length;
          if (count > 0) {
            var badge = document.createElement('span');
            badge.className = 'card-badge high-score';
            badge.textContent = count + '/' + act.total + ' ' + act.unit;
            card.appendChild(badge);
          }
        }
      } catch(e) {}
    }
  });

  // Dice Bingo medal count
  (function() {
    var diceBingoCard = document.querySelector('.dice-bingo');
    if (!diceBingoCard) return;

    var CHALLENGES = [
      [4, 4], [4, 6], [6, 6], [6, 8], [8, 8],
      [6, 10], [10, 10], [6, 12], [12, 12], [6, 20], [20, 20]
    ];
    var TARGETS = {
      '4,4':  { gold: 15, silver: 17, bronze: 19 },
      '4,6':  { gold: 17, silver: 19, bronze: 21 },
      '6,6':  { gold: 19, silver: 21, bronze: 24 },
      '6,8':  { gold: 21, silver: 23, bronze: 27 },
      '8,8':  { gold: 23, silver: 26, bronze: 30 },
      '6,10': { gold: 22, silver: 25, bronze: 29 },
      '10,10': { gold: 26, silver: 30, bronze: 35 },
      '6,12': { gold: 23, silver: 27, bronze: 31 },
      '12,12': { gold: 30, silver: 34, bronze: 40 },
      '6,20': { gold: 28, silver: 33, bronze: 39 },
      '20,20': { gold: 44, silver: 50, bronze: 58 }
    };

    function getDiceKey(d1, d2) {
      return [Math.min(d1, d2), Math.max(d1, d2)].join(',');
    }

    var medals = { gold: 0, silver: 0, bronze: 0 };
    CHALLENGES.forEach(function(pair) {
      var key = 'diceBingo_best_' + getDiceKey(pair[0], pair[1]);
      var best = localStorage.getItem(key);
      if (best !== null) {
        var t = TARGETS[getDiceKey(pair[0], pair[1])];
        var score = parseFloat(best);
        if (score <= t.gold) medals.gold++;
        else if (score <= t.silver) medals.silver++;
        else if (score <= t.bronze) medals.bronze++;
      }
    });

    var total = medals.gold + medals.silver + medals.bronze;
    if (total > 0) {
      var badge = document.createElement('span');
      if (medals.gold === CHALLENGES.length) {
        badge.className = 'card-badge trophy-gold';
        badge.innerHTML = trophySvg('#d97706') + 'All gold!';
      } else {
        badge.className = 'card-badge high-score';
        var parts = [];
        if (medals.gold > 0) parts.push('ðŸ¥‡' + medals.gold);
        if (medals.silver > 0) parts.push('ðŸ¥ˆ' + medals.silver);
        if (medals.bronze > 0) parts.push('ðŸ¥‰' + medals.bronze);
        badge.textContent = parts.join(' ');
      }
      diceBingoCard.appendChild(badge);
    }
  })();
</script>
</body>
</html>
